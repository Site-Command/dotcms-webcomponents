var __awaiter=this&&this.__awaiter||function(t,e,n,i){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{l(i.next(t))}catch(e){o(e)}}function a(t){try{l(i["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):r(t.value).then(s,a)}l((i=i.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return l([t,e])}}function l(s){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,r&&(o=s[0]&2?r["return"]:s[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;if(r=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;r=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(o=n.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){n.label=s[1];break}if(s[0]===6&&n.label<o[1]){n.label=o[1];o=s;break}if(o&&n.label<o[2]){n.label=o[2];n.ops.push(s);break}if(o[2])n.ops.pop();n.trys.pop();continue}s=e.call(t,n)}catch(a){s=[6,a];r=0}finally{i=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};System.register(["./p-79716aa9.system.js","./p-326f6e68.system.js"],(function(t){"use strict";var e,n,i,r,o,s,a;return{setters:[function(t){e=t.r;n=t.c;i=t.h;r=t.g;o=t.H},function(t){s=t.c;a=t.a}],execute:function(){var l=s((function(t,e){(function(e,n){t.exports=n()})(a,(function(){function t(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function n(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}var i="data-id";var r={resultsList:"autoComplete_list",result:"autoComplete_result",highlight:"autoComplete_highlighted",selectedResult:"autoComplete_selected"};var o={ENTER:13,ARROW_UP:38,ARROW_DOWN:40};var s=function t(e){return typeof e==="string"?document.querySelector(e):e()};var a=function t(e){var n=document.createElement(e.element);n.setAttribute("id",r.resultsList);if(e.container){e.container(n)}e.destination.insertAdjacentElement(e.position,n);return n};var l=function t(e){return"<span class=".concat(r.highlight,">").concat(e,"</span>")};var u=function t(e,n,o){var s=document.createDocumentFragment();n.forEach((function(t,e){var a=document.createElement(o.element);var l=n[e].index;a.setAttribute(i,l);a.setAttribute("class",r.result);o.content?o.content(t,a):a.innerHTML=t.match||t;s.appendChild(a)}));e.appendChild(s)};var c=function t(e){return e.innerHTML=""};var h=function t(e,n,r,s,a,l){s({event:e,query:n instanceof HTMLInputElement?n.value:n.innerHTML,matches:a.matches,results:a.list.map((function(t){return t.value})),selection:a.list.find((function(t){if(e.keyCode===o.ENTER){return t.index===Number(l.getAttribute(i))}else if(e.type==="mousedown"){return t.index===Number(e.currentTarget.getAttribute(i))}}))});c(r)};var f=function t(e,n,i,s){var a=n.childNodes,l=a.length-1;var u=undefined,c;var f=function t(e){u.classList.remove(r.selectedResult);if(e===1){c=u.nextSibling}else{c=u.previousSibling}};var d=function t(e){u=e;u.classList.add(r.selectedResult)};e.onkeydown=function(t){if(a.length>0){switch(t.keyCode){case o.ARROW_UP:if(u){f(0);if(c){d(c)}else{d(a[l])}}else{d(a[l])}break;case o.ARROW_DOWN:if(u){f(1);if(c){d(c)}else{d(a[0])}}else{d(a[0])}break;case o.ENTER:if(u){h(t,e,n,i,s,u)}}}};a.forEach((function(t){t.onmousedown=function(t){return h(t,e,n,i,s)}}))};var d={getInput:s,createResultsList:a,highlight:l,addResultsToList:u,navigation:f,clearResults:c};var p=function t(e,n){n=n||{bubbles:false,cancelable:false,detail:undefined};var i=document.createEvent("CustomEvent");i.initCustomEvent(e,n.bubbles,n.cancelable,n.detail);return i};p.prototype=window.Event.prototype;var v=typeof window.CustomEvent==="function"&&window.CustomEvent||p;var m=function t(){if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector}if(!Element.prototype.closest){Element.prototype.closest=function(t){var e=this;do{if(e.matches(t)){return e}e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null}}};var g={CustomEventWrapper:v,initElementClosestPolyfill:m};var y=function(){function e(n){t(this,e);var i=n.selector,r=i===void 0?"#autoComplete":i,o=n.data,s=o.key,a=o.src,l=o.cache,u=l===void 0?true:l,c=n.query,h=n.trigger;h=h===void 0?{}:h;var f=h.event,p=f===void 0?["input"]:f,v=h.condition,m=v===void 0?false:v,g=n.searchEngine,y=g===void 0?"strict":g,b=n.threshold,w=b===void 0?0:b,E=n.debounce,R=E===void 0?0:E,L=n.resultsList;L=L===void 0?{}:L;var x=L.render,k=x===void 0?false:x,_=L.container,C=_===void 0?false:_,T=L.destination,S=L.position,I=S===void 0?"afterend":S,A=L.element,D=A===void 0?"ul":A,M=L.navigation,H=M===void 0?false:M,O=n.sort,q=O===void 0?false:O,P=n.placeHolder,N=n.maxResults,j=N===void 0?5:N,W=n.resultItem;W=W===void 0?{}:W;var z=W.content,F=z===void 0?false:z,B=W.element,K=B===void 0?"li":B,V=n.noResults,U=n.highlight,G=U===void 0?false:U,J=n.onSelection;var Q=k?d.createResultsList({container:C,destination:T||d.getInput(r),position:I,element:D}):null;this.selector=r;this.data={src:function t(){return typeof a==="function"?a():a},key:s,cache:u};this.query=c;this.trigger={event:p,condition:m};this.searchEngine=y==="loose"?"loose":typeof y==="function"?y:"strict";this.threshold=w;this.debounce=R;this.resultsList={render:k,view:Q,navigation:H};this.sort=q;this.placeHolder=P;this.maxResults=j;this.resultItem={content:F,element:K};this.noResults=V;this.highlight=G;this.onSelection=J;this.init()}n(e,[{key:"search",value:function t(e,n){var i=n.toLowerCase();if(this.searchEngine==="loose"){e=e.replace(/ /g,"");var r=[];var o=0;for(var s=0;s<i.length;s++){var a=n[s];if(o<e.length&&i[s]===e[o]){a=this.highlight?d.highlight(a):a;o++}r.push(a)}if(o!==e.length){return false}return r.join("")}else{if(i.includes(e)){var l=new RegExp("".concat(e),"i");e=l.exec(n);return this.highlight?n.replace(e,d.highlight(e)):n}}}},{key:"listMatchedResults",value:function t(e){var n=this;return new Promise((function(t){var i=[];e.filter((function(t,e){var r=function r(o){var s=o?t[o]:t;if(s){var a=typeof n.searchEngine==="function"?n.searchEngine(n.queryValue,s):n.search(n.queryValue,s);if(a&&o){i.push({key:o,index:e,match:a,value:t})}else if(a&&!o){i.push({index:e,match:a,value:t})}}};if(n.data.key){var o=true;var s=false;var a=undefined;try{for(var l=n.data.key[Symbol.iterator](),u;!(o=(u=l.next()).done);o=true){var c=u.value;r(c)}}catch(h){s=true;a=h}finally{try{if(!o&&l["return"]!=null){l["return"]()}}finally{if(s){throw a}}}}else{r()}}));var r=n.sort?i.sort(n.sort).slice(0,n.maxResults):i.slice(0,n.maxResults);return t({matches:i.length,list:r})}))}},{key:"ignite",value:function t(){var e=this;var n=d.getInput(this.selector);if(this.placeHolder){n.setAttribute("placeholder",this.placeHolder)}var i=function t(e,n){var i;return function(){var t=this;var r=arguments;clearTimeout(i);i=setTimeout((function(){return e.apply(t,r)}),n)}};var r=function t(i){var r=n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement?n.value.toLowerCase():n.innerHTML.toLowerCase();var o=e.queryValue=e.query&&e.query.manipulate?e.query.manipulate(r):r;var s=e.resultsList.render;var a=e.trigger.condition?e.trigger.condition(o):o.length>e.threshold&&o.replace(/ /g,"").length;var l=function t(e,i){n.dispatchEvent(new g.CustomEventWrapper("autoComplete",{bubbles:true,detail:{event:e,input:r,query:o,matches:i?i.matches:null,results:i?i.list:null},cancelable:true}))};if(s){var u=e.resultsList.view;var c=d.clearResults(u);if(a){e.listMatchedResults(e.dataStream,i).then((function(t){l(i,t);if(e.resultsList.render){if(t.list.length===0&&e.noResults){e.noResults()}else{d.addResultsToList(u,t.list,e.resultItem);if(e.onSelection){e.resultsList.navigation?e.resultsList.navigation(i,n,u,e.onSelection,t):d.navigation(n,u,e.onSelection,t)}}}}))}else{l(i)}}else if(!s&&a){e.listMatchedResults(e.dataStream,i).then((function(t){l(i,t)}))}};var o=function t(n){Promise.resolve(e.data.cache?e.dataStream:e.data.src()).then((function(t){e.dataStream=t;r(n)}))};this.trigger.event.forEach((function(t){n.addEventListener(t,i((function(t){return o(t)}),e.debounce))}))}},{key:"init",value:function t(){var e=this;if(this.data.cache){Promise.resolve(this.data.src()).then((function(t){e.dataStream=t;e.ignite()}))}else{this.ignite()}g.initElementClosestPolyfill()}}]);return e}();return y}))}));var u="dot-autocomplete input{-webkit-box-sizing:border-box;box-sizing:border-box;width:200px}dot-autocomplete ul{background-color:#fff;list-style:none;margin:0;max-height:300px;overflow:auto;padding:0;position:absolute;width:200px}dot-autocomplete ul li{background-color:#fff;border-top:0;border:solid 1px #ccc;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;padding:0.25rem}dot-autocomplete ul li:first-child{border-top:solid 1px #ccc}dot-autocomplete ul li:focus{background-color:lightyellow;outline:0}dot-autocomplete ul li .autoComplete_highlighted{font-weight:bold}";var c=t("dot_autocomplete",function(){function t(t){e(this,t);this.selection=n(this,"selection",7);this.enter=n(this,"enter",7);this.lostFocus=n(this,"lostFocus",7);this.disabled=false;this.placeholder="";this.threshold=0;this.maxResults=0;this.debounce=300;this.data=null;this.id="autoComplete"+(new Date).getTime();this.keyEvent={Enter:this.emitEnter.bind(this),Escape:this.clean.bind(this)}}t.prototype.componentDidLoad=function(){if(this.data){this.initAutocomplete()}};t.prototype.render=function(){var t=this;return i("input",{autoComplete:"off",disabled:this.disabled||null,id:this.id,onBlur:function(e){return t.handleBlur(e)},onKeyDown:function(e){return t.handleKeyDown(e)},placeholder:this.placeholder||null})};t.prototype.watchThreshold=function(){this.initAutocomplete()};t.prototype.watchData=function(){this.initAutocomplete()};t.prototype.watchMaxResults=function(){this.initAutocomplete()};t.prototype.handleKeyDown=function(t){var e=this.getInputElement().value;if(e&&this.keyEvent[t.key]){t.preventDefault();this.keyEvent[t.key](e)}};t.prototype.handleBlur=function(t){var e=this;t.preventDefault();setTimeout((function(){if(document.activeElement.parentElement!==e.getResultList()){e.clean();e.lostFocus.emit(t)}}),0)};t.prototype.clean=function(){this.getInputElement().value="";this.cleanOptions()};t.prototype.cleanOptions=function(){this.getResultList().innerHTML=""};t.prototype.emitselect=function(t){this.clean();this.selection.emit(t)};t.prototype.emitEnter=function(t){if(t){this.clean();this.enter.emit(t)}};t.prototype.getInputElement=function(){return this.el.querySelector("#"+this.id)};t.prototype.initAutocomplete=function(){var t=this;this.clearList();new l({data:{src:function(){return __awaiter(t,void 0,void 0,(function(){return __generator(this,(function(t){return[2,this.getData()]}))}))}},sort:function(t,e){if(t.match<e.match){return-1}if(t.match>e.match){return 1}return 0},placeHolder:this.placeholder,selector:"#"+this.id,threshold:this.threshold,searchEngine:"strict",highlight:true,maxResults:this.maxResults,debounce:this.debounce,resultsList:{container:function(){return t.getResultListId()},destination:this.getInputElement(),position:"afterend"},resultItem:function(t){var e=t.match;return e},onSelection:function(e){var n=e.event,i=e.selection;n.preventDefault();t.focusOnInput();t.emitselect(i.value)}})};t.prototype.clearList=function(){var t=this.getResultList();if(t){t.remove()}};t.prototype.focusOnInput=function(){this.getInputElement().focus()};t.prototype.getResultList=function(){return this.el.querySelector("#"+this.getResultListId())};t.prototype.getResultListId=function(){return this.id+"_results_list"};t.prototype.getData=function(){return __awaiter(this,void 0,void 0,(function(){var t,e,n;return __generator(this,(function(i){switch(i.label){case 0:t=this.getInputElement();t.setAttribute("placeholder","Loading...");if(!(typeof this.data==="function"))return[3,2];return[4,this.data()];case 1:n=i.sent();return[3,3];case 2:n=[];i.label=3;case 3:e=n;t.setAttribute("placeholder",this.placeholder||"");return[2,e]}}))}))};Object.defineProperty(t.prototype,"el",{get:function(){return r(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{threshold:["watchThreshold"],data:["watchData"],maxResults:["watchMaxResults"]}},enumerable:false,configurable:true});return t}());c.style=u;var h="dot-chip span{margin-right:0.25rem}dot-chip button{cursor:pointer}";var f=t("dot_chip",function(){function t(t){e(this,t);this.remove=n(this,"remove",7);this.label="";this.deleteLabel="Delete";this.disabled=false}t.prototype.render=function(){var t=this;var e=this.label?this.deleteLabel+" "+this.label:null;return i(o,null,i("span",null,this.label),i("button",{type:"button","aria-label":e,disabled:this.disabled,onClick:function(){return t.remove.emit(t.label)}},this.deleteLabel))};Object.defineProperty(t.prototype,"el",{get:function(){return r(this)},enumerable:false,configurable:true});return t}());f.style=h}}}));